
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>

    <style>
      bikes_buttons {
      } 
    </style>


    <meta charset="UTF-8">
    <title>{% block title %}{% endblock %}</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
          integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
</head>

<body>


<div class="p-0 mb-0 bg-info text-white">
    <div class="row">
      <div class="col"></div>
      <div class="col"></div>
      <button type="button" class="btn btn-info" type="submit" value="Submit">
          <p class="text-center">    <div class="col"> О НАС </div>    </p>    
      </button>

      <button type="button" class="btn btn-info"  type="submit" value="Submit">    
          <p class="text-center">   <div class="col">ОПЛАТА И ДОСТАВКА </div>    </p>    </button>

      <button type="button" class="btn btn-info"  type="submit" value="Submit">    
          <p class="text-center">   <div class="col">КОНТАКТЫ</div>             </p>    </button>

      <button type="button" class="btn btn-info"  type="submit" value="Submit">    
          <p class="text-center">   <div class="col">СЕРВИС И ГАРАНТИЯ</div>    </p>    </button>

      {% if username %}

      <a href="{% url 'authentification_app:login' %}"> 
      <button type="button" class="btn btn-info"  type="submit" value="Submit">    
                <p class="text-center">   <div class="col"> ВХОД В ЛИЧНЫЙ КАБИНЕТ </div>    </p>    </button>
      </a>

      <a href="{% url 'authentification_app:logout' %}"> 
      <button type="button" class="btn btn-info"  type="submit" value="Submit">    
                <p class="text-center">   <div class="col">ЗАВЕРШИТЬ СЕССИЮ ({{ username }} )</div>    </p>    </button>
      </a>

      {% else %}

      <form action= "{% url 'authentification_app:login' %}" method="post" >
        {% csrf_token %}
        <button type="button" class="btn btn-info" data-toggle="modal" data-target="#entering" data-whatever="@getbootstrap">
          <p class="text-center">   <div class="col"> ВХОД & РЕГИСТРАЦИЯ </div>    </p> </button>  

                  <div class="modal fade" id="entering" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="exampleModalLabel"><h4 class="text-dark">Вход</h4></h5>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <div class="modal-body">
                          <form>
                            <div class="form-group">
                              
                              <label for="recipient-name" class="col-form-label" >  <h5 class="text-dark">Введите e-mail:</h5>  </label>
                              <input type="text" class="form-control"  placeholder='e-mail' name= "email" id="email">
                            </div>
                            <div class="form-group">
                            
                               <label for="recipient-name" class="col-form-label" > <h5 class="text-dark">Введите пароль:</h5>  </label>
                              <input type="text" class="form-control" placeholder='password' name= "password" id="password"></textarea>
                            </div>
                          </form>
                        </div>
                        <div class="modal-footer">
                          <a href="{% url 'authentification_app:register' %}">  <button type="button" class="btn btn-primary"> Registration </button> </a>
                          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                          <button type="submit" class="btn btn-success" id="OK"> OK </button>
                        </div>
                      </div>
                    </div>
                  </div>
      </form>

      {% endif %}


      <button type="button" class="btn btn-info"  type="submit" value="Submit">    
          <p class="text-center">   <div class="col">КОРЗИНА</div>     </p>    </button>

      <div class="col"></div>
      <div class="col"></div>
    </div>
</div>



<nav>
    {% block nav %}
    <div class="p-2 mb-0 bg-light text-white">
        <div class="row">
          <div class="col"></div>
          <div class="col">
              <a href="{% url 'bike:main_page' %}"> 
                  <p class="text-center"> <img src="{% static 'bike_app/bikes_logo.png' %}" class="img-fluid" alt="Responsive image">  </p>
              </a>
          </div>
          <div class="col"></div>
        </div>
    </div>
     {% endblock %}
</nav>



  <main>
    {% block content %}



      <div class="p-2 mb-0 bg-light text-white">
          <div class="row">
            <div class="col"></div>
            <div class="col"> 
              <p class="text-center"> <h2 class="text-dark"> {{ username }}, добро пожаловать в корзину  </h2>></p>  
            </div>
            <div class="col"></div>
          </div>
      </div>


      <div class="p-2 mb-0 bg-light text-white">
          <div class="row">
            <div class="col">
              <img height="30"> 
            </div>  
          </div>
      </div>


      <div class="p-2 mb-0 bg-light text-white">
          <div class="row">
            <div class="col"></div>
            <div class="col">  <p class="text-center"> <h4 class="text-dark"> Список товаров в вашей корзине: <h4></p> 
            </div>
            <div class="col"></div>
          </div>
      </div>



      {% for user_item in orders %}
        <div class="p-0 mb-0 bg-light text-white">
          <div class="row">
            <div class="col-3"></div>
            <div class="col-3">  <p class="text-center"> <p class="text-dark"> {{forloop.counter}}. {{ user_item.item_name }} {{ user_item.item_size }}<p></p> </div>
            <div class="col"></div>
            <div class="col-1">  <p class="text-right"> <p class="text-dark"> Цена-{{ user_item.item_price }}₽  <p></p> </div>    
            <div class="col"> <p></p>

              <!-- <a href="{% url 'order_app:basket' %}">  -->
              <button type="button" class="btn btn-danger"  type="submit" value = "no" id="del{{user_item.id}}" name="del{{user_item.id}}">
               удалить товар </button>
             <!-- </a> -->

            </div>
            <div class="col"> <p></p>
              <button type="button" class="btn btn-success"  type="submit" value="yes" id="add{{user_item.id}}" name="add{{user_item.id}}"
              > оформить заказ </button> </div>
                              <p></p>
            <div class="col-2"></div>
          </div>
      </div>
      {% endfor %}


      <div class="p-2 mb-0 bg-light text-white">
          <div class="row">
            <div class="col">
              <img height="30"> 
            </div>  
          </div>
      </div>



      <div class="p-2 mb-0 bg-light text-white">
          <div class="row">
            <div class="col"></div>
            <div class="col">  
               <button type="button" class="btn btn-success"  type="submit" value="Submit"> оформить заказ на все товары в корзине </button>
            </div>
            <div class="col"></div>
          </div>
      </div>








    


    {% endblock %}
  </main>


<div class="p-2 mb-0 bg-light text-white">
    <div class="row">
      <div class="col"></div>
      <div class="col">
          <p class="text-center"> <img width="50">  </p>
      </div>
      <div class="col"></div>
    </div>
</div>


<div class="p-2 mb-0 bg-dark text-white">
    <div class="row">
      <div class="col"></div>
      <div class="col">
          <p class="text-center">  ИНФОРМАЦИЯ </p>
          <p class="text-center"> <a class="text-white"   href="#"> Вакансии </a> </p>
          <p class="text-center"> <a class="text-white"   href="#"> Команда </a> </p>
          <p class="text-center"> <a class="text-white"   href="#">Соглашение о конфиденциальности </a> </p>
      </div>
      <div class="col"></div>
    </div>
</div>


<script type="application/javascript" src="https://unpkg.com/jquery@3.3.1/dist/jquery.js"></script>



<script type="application/javascript">
    (function (window, document, $) {
            var pressed = []
            var press = {'pressed':pressed}
            
            var ordered = []
            var order = {'pressed':ordered}


              function sendRequest(a) { 

              $.ajaxSetup({
                  headers: { "X-CSRFToken": '{{csrf_token}}' }
                });
              console.log('sacsaf')
              new_link = "{% url 'order_app:basket' %}"
                
                var request = $.ajax({
                    type:'get',
                    url: new_link,
                    crossDomain: true,
                    data: press, 
                });

                request.done(function (data) {
                    var result = press;
                })
            }




            document.addEventListener('DOMContentLoaded', function () {
            var control = document.getElementsByClassName('btn btn-danger');
           
            for (var i = 0; i < control.length - 1; i++) {
              event.target.addEventListener("click",function (event) { 
                  
                  if (event.target.className =='btn btn-danger') {
                      pressed.push(event.target.id)
                      window.location.href = ("{% url 'order_app:basket' %}" + '?' + encodeURIComponent(pressed))
                }
            })
          }
       })


            document.addEventListener('DOMContentLoaded', function () {
            var control = document.getElementsByClassName('btn btn-success');     

            for (var i = 0; i < control.length - 1; i++) {
              event.target.addEventListener("click",function (event) { 
                  
                  if (event.target.className =='btn btn-success') {
                      ordered.push(event.target.id)
                      window.location.href = ("{% url 'order_app:make_order' %}" + '?' + encodeURIComponent(ordered))
                }
            })
          }
       })


    })(window, document, jQuery);
</script>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>


</body>

</html>


